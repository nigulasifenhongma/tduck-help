# Proéƒ¨ç½²

ä¸ºäº†ç®€åŒ–éƒ¨ç½²ï¼Œæœ¬æ•™ç¨‹ä½¿ç”¨å®å¡”é¢æ¿è¿›è¡ŒåŸºç¡€ç¯å¢ƒçš„å¿«é€Ÿå®‰è£…ï¼›æ–‡æ¡£ä»…ä¾›æ–°æ‰‹å‚è€ƒéƒ¨ç½²ï¼Œå¦‚å¯¹è¿è¡Œç¯å¢ƒæœ‰å…¶ä½™æ ‡å‡†ï¼Œå»ºè®®é‡‡ç”¨å…¶ä»–æ–¹å¼éƒ¨ç½²ã€‚å¦‚å‘ç°æ–‡æ¡£æœ‰ä¸æ­£ç¡®æˆ–è€…æœ‰æ›´å¥½æ–¹æ¡ˆèƒ½å¤Ÿè§£å†³é—®é¢˜ï¼Œæ¬¢è¿æå‡ºå»ºè®®ã€‚

> ğŸ’ å‚è€ƒé…ç½®ï¼š
>
> - æ¼”ç¤ºç¯å¢ƒä½¿ç”¨çš„æœºå™¨é…ç½®ä¸º **è…¾è®¯äº‘4æ ¸8G 5Må¸¦å®½æœºå™¨ï¼Œ**å®æµ‹QPSå¯>1000
> - æ–‡ä»¶å­˜å‚¨ä½¿ç”¨ [ä¸ƒç‰›äº‘å¯¹è±¡å­˜å‚¨ ](https://s.qiniu.com/ZBBBje)
> - çŸ­ä¿¡é€šé“ä½¿ç”¨ [ä¸­æ˜±ç»´ä¿¡](https://www.veesing.com/)
> - å›¾åƒè¯†åˆ«ä½¿ç”¨ [ç™¾åº¦ocr](https://ai.baidu.com/tech/ocr?track=cp:aipinzhuan|pf:pc|pp:AIpingtai|pu:r1-2|ci:|kw:10493549)
---


## ä¸€ã€åŸºç¡€ç¯å¢ƒ

## 1.å®å¡”é¢æ¿å®‰è£…

1.ç™»å½•æ§åˆ¶å°åï¼Œè¾“å…¥ï¼š

```java
yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh
```

![image.png](https://oss.tduckcloud.com/1649422022768-3f692e43-d875-4fce-b06b-3b8124380358.png)å‡ºç°æ­¤ç•Œé¢æ—¶å®‰è£…å®Œæˆï¼Œå¯ä»¥ä½¿ç”¨å¤–ç½‘é¢æ¿åœ°å€å’Œusernameã€passwordè¿›è¡Œé¢æ¿è®¿é—®


## 2.å®‰è£…MySql

ä½¿ç”¨å®å¡”é¢æ¿çš„åº”ç”¨å•†åº—ï¼Œæœç´¢mysqlï¼Œå¹¶ç‚¹å‡»å®‰è£…![image.png](https://oss.tduckcloud.com/1649423530709-74dd1a7d-8bb0-4416-9fa5-f290e07be15e.png)

## 3.å®‰è£…redis

æ­¥éª¤ä¸ä¸Šè¿°ä¸€è‡´ï¼Œè¿›å…¥åº”ç”¨å•†åº—ï¼Œå¯»æ‰¾redisç‚¹å‡»å®‰è£…ï¼Œæ­¤å¤„æ²¡æœ‰ç‰ˆæœ¬è¦æ±‚ï¼Œå®‰è£…å®Œæ¯•å³å¯ï¼![image.png](https://oss.tduckcloud.com/1649423809188-dd492ace-a995-4452-8ede-feb39c0e7526.png)

## 4.å®‰è£…Nginx

æ­¥éª¤åŒä¸Šï¼Œåº”ç”¨å•†åº—æœç´¢Nginxï¼Œç‚¹å‡»å®‰è£…ç­‰å¾…æ‰§è¡Œå®Œæ¯•å³å¯![image.png](https://oss.tduckcloud.com/1649424001813-6237b0c5-0a4c-4f33-84ed-aaaa36ff3e8e.png)

## 5.å®‰è£…javaä¸€é”®éƒ¨ç½²

æ­¥éª¤åŒä¸Šï¼Œä¸åšèµ˜è¿°![image.png](https://oss.tduckcloud.com/1649424084542-12c38eb6-5871-4ee2-8f7d-0a084de830f7.png)

---


## 6.åˆ›å»ºæ•°æ®åº“

ç‚¹å‡»æ•°æ®åº“-æ·»åŠ æ•°æ®åº“ï¼Œæ­¤å¤„åˆ›å»ºçš„æ•°æ®åº“ä¸ºäº†æ–¹ä¾¿è®°å¿†ä¸ºï¼Œæ•°æ®åº“åç§°ï¼štduck-proï¼Œç”¨æˆ·åï¼štduckï¼Œå¯†ç ï¼štduck@proï¼ˆé»˜è®¤ï¼‰ï¼›å¦‚æœè‡ªè¡Œè®¾å®šï¼Œè¯·ä¿®æ”¹tduck-pro-platform>tduck-api>src>main>resources>application-prod.ymlä¸­çš„æ•°æ®åº“å¯†ç ï¼Œç„¶åé‡æ–°ç¼–è¯‘åç«¯é¡¹ç›®ï¼![image.png](https://oss.tduckcloud.com/1649424528325-db42a23d-c59c-457e-a799-e894238b6efa.png)

---


## äºŒã€æ„å»ºåç«¯Javaé¡¹ç›®

> å¦‚æœåœ¨winServeræ„å»º,éœ€è¦è‡ªè¡Œç™¾åº¦å®‰è£…æ–¹æ¡ˆ æ­¤å¤„ä½¿ç”¨linuxä¸ºä¾‹

## 1.å®‰è£…git

ç”¨äºæ‹‰å–ä»£ç 

```java
yum install git
```

![image.png](https://oss.tduckcloud.com/1649476676100-96eeafa6-c7d8-40a8-882e-3d3e024f1380.png)

## 2.å®‰è£…jdk1.8

```java
yum install -y java-1.8.0-openjdk-devel.x86_64 
```

![image.png](https://oss.tduckcloud.com/1649477338018-d0531e40-b520-469c-9222-633ea0a5472b.png)

## 3.å®‰è£…maven

å‚è€ƒé“¾æ¥ https://www.jianshu.com/p/dfccd5de6032

```java
sudo wget http://repos.fedorapeople.org/repos/dchen/apache-maven/epel-apache-maven.repo -O /etc/yum.repos.d/epel-apache-maven.repo
```

![image.png](https://oss.tduckcloud.com/1649477364667-af7ecd49-7aa8-4c4e-811e-aa2efcee8548.png)

```java
sudo sed -i s/\$releasever/6/g /etc/yum.repos.d/epel-apache-maven.repo 
```

```java
sudo yum install -y apache-maven æˆ– sudo yum install -y maven 
```

![image.png](https://oss.tduckcloud.com/1649477393268-06f0c294-34ab-4c37-8282-b42373976d5e.png)

## 4.æ‹‰å–ä»£ç 

æ‹‰å–ä»£ç  ä¼šæç¤ºä½ è¾“å…¥è´¦å·å¯†ç 

```java
git clone https://è¯·è¾“å…¥ç§æœåœ°å€/tduck/tduck-pro-platform.git

```

è¿›å…¥æ‹‰å–çš„ä»£ç ç›®å½•

```java
cd tduck-pro-platform
```

## 5.æ‰“åŒ…åç«¯é¡¹ç›®

è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼Œtduck-pro-platformä¸‹æ‰§è¡Œ

```java
mvn clean package -Dmaven.test.skip=true
```

æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´

```java
cd tduck-api/target/
```

æœ€ç»ˆtargetç›®å½•ä¸‹æœ‰ä¸€ä¸ªtduck-api.jar ä¹‹åç”¨åˆ° **âš ï¸ åˆ’é‡ç‚¹**


## 6.ä¸Šä¼ åç«¯jaråŒ…

é€‰æ‹©åˆšæ‰“åŒ…çš„tduck-api.jarä¸Šä¼ åˆ°å®å¡”çš„æŒ‡å®šç›®å½•![image.png](https://oss.tduckcloud.com/1650114803165-64dce20c-13fa-450b-bca7-1caa105112ef.png)
<a name="AAfxh"></a>

## 7.å¯¼å…¥æ•°æ®åº“æ–‡ä»¶

åœ¨ä¸Šé¢æ­¥éª¤åˆ›å»ºçš„ tduck-pro-platform æ–‡ä»¶å¤¹ç›®å½•çš„ doc ç›®å½•ä¸­ï¼Œæ‰¾åˆ° tduck-pro.sql æ–‡ä»¶è¿›è¡Œå¯¼å…¥![image.png](https://oss.tduckcloud.com/1650682547934-6cd6671c-bd47-4702-be04-9c88883636b7.png)

## 8.æ–°å»ºjavaé¡¹ç›®

åˆ›å»ºä¸€ä¸ªjavaé¡¹ç›®ï¼Œé€‰æ‹©åˆšä¸Šä¼ çš„tduck-api.jarï¼Œç«¯å£è®¾ç½®ä¸º8998ï¼Œé€‰æ‹©rootç”¨æˆ·ï¼Œç‚¹å‡»ä¿å­˜å³å¯![image.png](https://oss.tduckcloud.com/1650114719001-f226e328-dcc1-4545-a61f-b5cb796a799e.png)

## 9.å¯åŠ¨é¡¹ç›®

ç‚¹å‡»é¡¹ç›®çŠ¶æ€ï¼Œä¸€é”®ç§»åŠ¨ï¼Œå¯åŠ¨æˆåŠŸåå¯ä»¥çœ‹åˆ°èµ„æºä½¿ç”¨ç‡å æ¯”![image.png](https://oss.tduckcloud.com/1650682732544-58889327-6962-44bc-874b-cc17f762dafb.png)


---

## ä¸‰ã€æ„å»ºå‰ç«¯é¡¹ç›®

      1. å®‰è£…Nodejs 
      2. æ‹‰å–ä»£ç  
      3. ç¼–è¯‘ä»£ç 

## 1.å®‰è£…node.js

```java
curl --silent --location https://rpm.nodesource.com/setup_14.x | bash - 
```

æ‰§è¡Œå‘½ä»¤ï¼Œç­‰å¾…æ‰§è¡Œå®Œæˆ![image.png](https://oss.tduckcloud.com/1649462032379-9df8e571-3b7c-4a57-baab-6d4fc7855a7e.png)

```java
yum install nodejs
```

æ‰§è¡Œï¼Œç­‰å¾…æ‰§è¡Œå®Œæˆ![image.png](https://oss.tduckcloud.com/1649462105150-dbd51011-3a52-4066-80d0-23056408ce17.png)

## 2.æ‹‰å–ä»£ç 

```java
git clone https://è¯·è¾“å…¥ç§æœåœ°å€/tduck/tduck-pro-front.git
```

æ‹‰å–å‰ç«¯ä»£ç  ä¼šæç¤ºä½ è¾“å…¥è´¦å·å¯†ç  ![image.png](https://oss.tduckcloud.com/1649462263617-aa344e67-51a9-463a-8521-c26e9b703051.png)

## 3.è¿›å…¥ä»£ç ç›®å½•

```java
cd tduck-pro-front
```

è¿›å…¥å‰ç«¯ä»£ç  ç›®å½•![image.png](https://oss.tduckcloud.com/1649462346520-5d3156ff-b65e-4274-ba1e-4eb279233804.png)

## 4.å®‰è£…ä¾èµ–

```java
npm install --registry=http://registry.npm.taobao.org
```

å®‰è£…ä¾èµ– éœ€è¦ç­‰å¾…å¾ˆä¹… ![image.png](https://oss.tduckcloud.com/1649463227461-2faf6337-c0c9-4ee7-937b-aaf7fb716c1e-20230119093003260.png)

### 5.æ‰“åŒ…é¡¹ç›®

```java
npm install
```

## 6.ç¼–è¯‘é¡¹ç›®

```java
npm run build
```

** ****ç¼–è¯‘å®Œæˆtduck-pro-frontç›®å½•ä¼šæœ‰ä¸€ä¸ªdistæ–‡ä»¶å¤¹ è®°ä½ åé¢è¦ç”¨**![image.png](https://oss.tduckcloud.com/1649463370082-f23a19c0-382d-48d2-90e9-d3c48dd92655-20230119093033434.png)

## 7.åˆ›å»ºç«™ç‚¹

æ‰“åŒ…å¥½çš„å‰ç«¯ç”¨å®‰è£…çš„nginx åˆ›å»ºPHPé¡¹ç›® å‰ç«¯æ‰“åŒ…çš„distç›®å½•ä¸‹çš„æ–‡ä»¶å¤åˆ¶åˆ°åˆ›å»ºçš„ç«™ç‚¹æ ¹ç›®å½•ä¸‹ ![image.png](https://oss.tduckcloud.com/1649480343517-14d8cbc9-1b70-48aa-9504-0dd3d80662e2-20230119093051659.png)é…ç½®æ–‡ä»¶ï¼ˆé»˜è®¤å•æœºéƒ¨ç½²å‚æ•°æƒ…å†µä¸‹ä¸ç”¨æ”¹ï¼Œå¦‚æœåç«¯ç«¯å£ä¸æ˜¯8998åˆ™éœ€è¦è‡ªè¡Œä¿®æ”¹)ï¼š

> æ³¨æ„äº‹é¡¹ï¼šå‡ºç°404ã€502é”™è¯¯ä¸€å®šæ˜¯nginxæ–‡ä»¶çš„é—®é¢˜ï¼Œè¯·ä»”ç»†æ£€æŸ¥ï¼Œä¸è¡Œé‡æ–°åˆ æ‰å‰ç«¯é‡æ¥ä¸€æ¬¡ï¼Œæˆ–è€…é‡å¯nginxæœåŠ¡ï¼Œé‡è½½é…ç½®ï¼Œå¤šè¯•å‡ æ¬¡ï¼

```tsx
server
{
    listen 80;
    server_name ä½ çš„ç½‘å€;
    index index.php index.html index.htm default.php default.htm default.html;
    root /www/wwwroot/ä½ çš„ç½‘å€;
    try_files $uri $uri/ /index.html;
    #SSL-START SSLç›¸å…³é…ç½®ï¼Œè¯·å‹¿åˆ é™¤æˆ–ä¿®æ”¹ä¸‹ä¸€è¡Œå¸¦æ³¨é‡Šçš„404è§„åˆ™
    #error_page 404/404.html;
    #SSL-END
    
    #ERROR-PAGE-START  é”™è¯¯é¡µé…ç½®ï¼Œå¯ä»¥æ³¨é‡Šã€åˆ é™¤æˆ–ä¿®æ”¹
    #error_page 404 /404.html;
    #error_page 502 /502.html;
    #ERROR-PAGE-END
    
    #PHP-INFO-START  PHPå¼•ç”¨é…ç½®ï¼Œå¯ä»¥æ³¨é‡Šæˆ–ä¿®æ”¹
    include enable-php-00.conf;
    #PHP-INFO-END
    
    
    #ç¦æ­¢è®¿é—®çš„æ–‡ä»¶æˆ–ç›®å½•
    location ~ ^/(\.user.ini|\.htaccess|\.git|\.svn|\.project|LICENSE|README.md)
    {
        return 404;
    }
    
     # å‰ç«¯ä»£ç†
    location /tduck-api/{
        proxy_pass http://localhost:8998/tduck-api/;
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Credentials: true;
        add_header Access-Control-Allow-Methods GET,POST,OPTIONS,PUT,DELETE;

        # è¿æ¥å»¶æ—¶
        proxy_connect_timeout 3600s;
        proxy_read_timeout 3600s;
        proxy_send_timeout 3600s;
        # IP ç©¿é€
        proxy_set_header        Host $proxy_host;
        proxy_set_header        X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        # WebSocket ç©¿é€
        proxy_set_header Origin "";
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
    
    #ä¸€é”®ç”³è¯·SSLè¯ä¹¦éªŒè¯ç›®å½•ç›¸å…³è®¾ç½®
    location ~ \.well-known{
        allow all;
    }

    
    location ~ .*\.(js|css)?$
    {
        expires      12h;
        error_log /dev/null;
        access_log /dev/null; 
    }
    access_log  /www/wwwlogs/ä½ çš„ç½‘å€.log;
    error_log  /www/wwwlogs/ä½ çš„ç½‘å€.error.log;
}
```

å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œæ£€æŸ¥80ç«¯å£æ˜¯å¦å¼€æ”¾ï¼›å¹¶è¿›è¡Œè®¿é—®![image.png](https://oss.tduckcloud.com/1649513265249-76a1fc55-62da-4556-b717-e7fcb3ce3881-20230119093057971.png)é»˜è®¤éƒ¨ç½²å¯†ç ï¼šadmin/12345678ï¼Œç™»å½•åæ–°å»ºè¡¨å•æµ‹è¯•æ˜¯å¦æ­£å¸¸å³å¯ï¼



## å››ã€å…¶ä»–é…ç½®ï¼š

[æ–‡ä»¶å­˜å‚¨é…ç½®](https://www.yuque.com/tduck/home/bezf05?view=doc_embed)[é‚®ä»¶/çŸ­ä¿¡/å…¬ä¼—å·é…ç½®](https://www.yuque.com/tduck/home/mg3mqq?view=doc_embed)



## äº”ã€å¸¸è§é—®é¢˜ï¼š

[TDUCKâ€˜Proå¸¸è§é—®é¢˜](
